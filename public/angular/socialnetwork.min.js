(function(){angular.module("socialnetworkApp",["ngRoute","ngSanitize","ui.bootstrap"]);function e(e,t){e.when("/",{templateUrl:"/home/home.view.html"}).otherwise({redirectTo:"/"});t.html5Mode(true)}angular.module("socialnetworkApp").config(["$routeProvider","$locationProvider",e])})();(function(){angular.module("socialnetworkApp").controller("registerCtrl",e);e.$inject=["$scope","registerUser","geoLocation"];function e(e,t,o){var r=this;r.message="Checking your location";r.getData=function(e){var o=e.coords.latitude,n=e.coords.longitude;r.message="Searching for nearby places";var i;i={name:r.register.name,firstname:r.register.firstname,lastname:r.register.lastname,email:r.register.email,password:r.register.password,lat:o,lng:n};t.register(o,n,i).success(function(e){r.message="User Create";alert("USUARIO CREADO")}).error(function(e){r.message="Sorry, something's gone wrong, please try again later"})};r.showError=function(t){e.$apply(function(){r.message=t.message})};r.noGeo=function(){e.$apply(function(){r.message="Geolocation is not supported by this browser."})};r.registerSubmit=function(){o.getPosition(r.getData,r.showError,r.noGeo)}}})();(function(){angular.module("socialnetworkApp").service("geolocation",e);function e(){var e=function(e,t,o){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(e,t)}else{o()}};return{getPosition:e}}})();(function(){angular.module("socialnetworkApp").service("registerUser",e);e.$inject=["$http"];function e(e){var t=function(t,o,r){return e.post("/api/users/create",JSON.stringify(r))};return{register:t}}})();(function(){angular.module("socialnetworkApp").service("authentication",e);e.$inject=["$http","$window"];function e(e,t){var o=function(e){t.localStorage["socialnetwork-token"]=e};var r=function(){return t.localStorage["socialnetwork-token"]};var n=function(){var e=r();if(e){var o=JSON.parse(t.atob(e.split(".")[1]));return o.exp>Date.now()/1e3}else{return false}};var i=function(){if(n()){var e=r();var o=JSON.parse(t.atob(e.split(".")[1]));return{email:o.email,name:o.name}}};register=function(t){return e.post("/api/register",t).success(function(e){o(e.token)})};login=function(t){return e.post("/api/login",t).success(function(e){o(e.token)})};logout=function(){t.localStorage.removeItem("socialnetwork-token")};return{currentUser:i,saveToken:o,getToken:r,isLoggedIn:n,register:register,login:login,logout:logout}}})();(function(){angular.module("socialnetworkApp").filter("formatDistance",t);var e=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};function t(){return function(t){var o,r;if(t&&e(t)){if(t>1){o=parseFloat(t).toFixed(1);r="km"}else{o=parseInt(t*1e3,10);r="m"}return o+r}else{return"?"}}}})();(function(){angular.module("socialnetworkApp").directive("footerGeneric",e);function e(){return{restrict:"EA",templateUrl:"/common/directives/footerGeneric/footerGeneric.template.html"}}})();